# Определение ориентации медицинской справки на фотографии

## Введение
Заказчик - DonorSearch -  занимается развитием донорства в стране. Для этого есть платформа DonorSearch.org - где для доноров доступны бонусная программа, игрофикация пути донора и многое другое. Важной является проверка честности доноров и корректности внесенных донаций. Подтверждение производится по справке установленной формы (№405), такую справку донор получает в центре крови.

## Задачи проекта
- Исследовать существующие подходы к решению задачи;
- Выбор готовой или обучение собственной модели компьютерного зрения для определения ориентации изображения;
- Подготовка скриптов для препроцессинга изображения, инференса модели и постпроцессинга изображения;
- Тестирование модели, определение метрик;
- Создание микросервиса FastAPI для последующей интеграции в продукт заказчика.

## Стек технологий

- **FastAPI** — фреймворк для разработки API.
- **PyTorch** — для работы с предобученной моделью компьютерного зрения.
- **Sklearn** — для расчета метрик.
- **Docker и Docker-Compose** — для контейнеризации и управления сервисами.
- **Pillow (PIL)** — для обработки изображений.

## Заказчик
DonorSearch

Некоммерческая организация по поиску доноров крови


## Исходные данные
Набор изображений из 173 справок в разной ориентации. Имеются целевые фотографии справок, а так же дополнительные.


## Требования

- Рассчитана Accuracy для многоклассовой классификации;
- Построены ROC-кривые и матрицы ошибок для наилучшей из моделей;
- Формат входных данных - путь к изображению;
- Формат выходных данных - путь к повёрнутому изображению;
- Количество классов классификатора - 4 (поворот на 0, 90, 180 или 270 градусов);
- Инференс - на CPU.

## **Инструкции по использованию:**
1. Необходимо склонировать репозиторий:

   ```bash
   git clone https://github.com/SDDmitri/DonorCertificate.git
   cd docker
   ```

2. Запустите проект с помощью Docker Compose:

Для запуска всех сервисов используйте следующую команду:

   ```bash
docker compose up --build
```

Это создаст и запустит все необходимые контейнеры, включая FastAPI-приложение и любые другие зависимости.

3. Доступ к приложению:

Приложение будет доступно по адресу: http://localhost:8000

4. Документация API:

Вы можете воспользоваться интерактивной документацией FastAPI (Swagger UI) по адресу: http://localhost:8000/docs

Страницы приложения:

/testing — Страница для загрузки изображения и предсказания угла его поворота.

/predict - путь для отправки post запроса с путём изображения

### Метрика и условия:
- Скорость обработки кадра должна быть не более 1000 мс. 
- Метрика оценки модели – Accuracy.

## Cтатус: 
Завершён.



